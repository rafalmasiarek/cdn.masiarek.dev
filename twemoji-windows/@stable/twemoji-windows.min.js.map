{
  "version": 3,
  "sources": ["../src/index.js"],
  "sourcesContent": ["// twemoji-windows.js\n/*!\n * twemoji-windows.js\n *\n * Windows-only emoji rendering fix using Twemoji.\n *\n * Replaces native emoji rendering with SVG-based Twemoji\n * for elements marked with `.d-emoji`.\n *\n * Copyright (c) 2025 Rafal Masiarek\n *\n * MIT License\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n(function () {\n    'use strict';\n\n    // Run ONLY on Windows (fix broken emoji rendering)\n    if (!/Windows/i.test(navigator.userAgent)) return;\n\n    // Twemoji JS from your CDN\n    var TWEMOJI_CDN = 'https://cdn.masiarek.pl/twemoji/@latest/twemoji.min.js';\n\n    // Base URL for Twemoji assets (SVG/PNG). Must end with \"/\".\n    // With folder=\"svg\" and ext=\".svg\", Twemoji will fetch:\n    //   <base>svg/<codepoint>.svg\n    var TWEMOJI_BASE = 'https://cdn.masiarek.pl/twemoji/@latest/assets/';\n\n    function loadScriptOnce(src, cb) {\n        // If already present (by src), don't load again\n        var existing = document.querySelector('script[src=\"' + src + '\"]');\n        if (existing) {\n            if (typeof cb === 'function') {\n                if (existing.dataset.loaded === '1') cb();\n                else existing.addEventListener('load', cb, { once: true });\n            }\n            return;\n        }\n\n        var s = document.createElement('script');\n        s.src = src;\n        s.async = true;\n        s.crossOrigin = 'anonymous';\n        s.onload = function () {\n            s.dataset.loaded = '1';\n            if (typeof cb === 'function') cb();\n        };\n        s.onerror = function () {\n            // Fail silently: no emoji replacement is better than breaking the page\n            // console.warn('[twemoji-windows] Failed to load twemoji:', src);\n        };\n        document.head.appendChild(s);\n    }\n\n    function parseEmojis() {\n        if (!window.twemoji || typeof window.twemoji.parse !== 'function') return;\n\n        var nodes = document.querySelectorAll('.d-emoji');\n        if (!nodes || nodes.length === 0) return;\n\n        // Add marker class for styling / debugging\n        for (var i = 0; i < nodes.length; i++) {\n            nodes[i].classList.add('win-twemoji');\n        }\n\n        // Parse only within each .d-emoji node (keeps scope tight)\n        for (var j = 0; j < nodes.length; j++) {\n            window.twemoji.parse(nodes[j], {\n                base: TWEMOJI_BASE,\n                folder: 'svg',\n                ext: '.svg'\n            });\n        }\n    }\n\n    // Run when DOM is ready\n    function onReady(fn) {\n        if (document.readyState === 'loading') {\n            document.addEventListener('DOMContentLoaded', fn, { once: true });\n        } else {\n            fn();\n        }\n    }\n\n    onReady(function () {\n        // Load twemoji if missing, then parse\n        if (!window.twemoji || typeof window.twemoji.parse !== 'function') {\n            loadScriptOnce(TWEMOJI_CDN, parseEmojis);\n        } else {\n            parseEmojis();\n        }\n\n        // Optional: if your site injects content dynamically, this keeps it working.\n        // Very light observer: only reacts to added nodes.\n        try {\n            var obs = new MutationObserver(function (mutations) {\n                for (var i = 0; i < mutations.length; i++) {\n                    if (mutations[i].addedNodes && mutations[i].addedNodes.length) {\n                        parseEmojis();\n                        break;\n                    }\n                }\n            });\n            obs.observe(document.documentElement, { childList: true, subtree: true });\n        } catch (e) {\n            // ignore\n        }\n    });\n})();\n"],
  "mappings": "OA+BC,UAAY,CACT,aAGA,GAAI,CAAC,WAAW,KAAK,UAAU,SAAS,EAAG,OAG3C,IAAIA,EAAc,yDAKdC,EAAe,kDAEnB,SAASC,EAAeC,EAAKC,EAAI,CAE7B,IAAIC,EAAW,SAAS,cAAc,eAAiBF,EAAM,IAAI,EACjE,GAAIE,EAAU,CACN,OAAOD,GAAO,aACVC,EAAS,QAAQ,SAAW,IAAKD,EAAG,EACnCC,EAAS,iBAAiB,OAAQD,EAAI,CAAE,KAAM,EAAK,CAAC,GAE7D,MACJ,CAEA,IAAIE,EAAI,SAAS,cAAc,QAAQ,EACvCA,EAAE,IAAMH,EACRG,EAAE,MAAQ,GACVA,EAAE,YAAc,YAChBA,EAAE,OAAS,UAAY,CACnBA,EAAE,QAAQ,OAAS,IACf,OAAOF,GAAO,YAAYA,EAAG,CACrC,EACAE,EAAE,QAAU,UAAY,CAGxB,EACA,SAAS,KAAK,YAAYA,CAAC,CAC/B,CAEA,SAASC,GAAc,CACnB,GAAI,GAAC,OAAO,SAAW,OAAO,OAAO,QAAQ,OAAU,YAEvD,KAAIC,EAAQ,SAAS,iBAAiB,UAAU,EAChD,GAAI,GAACA,GAASA,EAAM,SAAW,GAG/B,SAASC,EAAI,EAAGA,EAAID,EAAM,OAAQC,IAC9BD,EAAMC,CAAC,EAAE,UAAU,IAAI,aAAa,EAIxC,QAASC,EAAI,EAAGA,EAAIF,EAAM,OAAQE,IAC9B,OAAO,QAAQ,MAAMF,EAAME,CAAC,EAAG,CAC3B,KAAMT,EACN,OAAQ,MACR,IAAK,MACT,CAAC,GAET,CAGA,SAASU,EAAQC,EAAI,CACb,SAAS,aAAe,UACxB,SAAS,iBAAiB,mBAAoBA,EAAI,CAAE,KAAM,EAAK,CAAC,EAEhEA,EAAG,CAEX,CAEAD,EAAQ,UAAY,CAEZ,CAAC,OAAO,SAAW,OAAO,OAAO,QAAQ,OAAU,WACnDT,EAAeF,EAAaO,CAAW,EAEvCA,EAAY,EAKhB,GAAI,CACA,IAAIM,EAAM,IAAI,iBAAiB,SAAUC,EAAW,CAChD,QAASL,EAAI,EAAGA,EAAIK,EAAU,OAAQL,IAClC,GAAIK,EAAUL,CAAC,EAAE,YAAcK,EAAUL,CAAC,EAAE,WAAW,OAAQ,CAC3DF,EAAY,EACZ,KACJ,CAER,CAAC,EACDM,EAAI,QAAQ,SAAS,gBAAiB,CAAE,UAAW,GAAM,QAAS,EAAK,CAAC,CAC5E,MAAY,CAEZ,CACJ,CAAC,CACL,GAAG",
  "names": ["TWEMOJI_CDN", "TWEMOJI_BASE", "loadScriptOnce", "src", "cb", "existing", "s", "parseEmojis", "nodes", "i", "j", "onReady", "fn", "obs", "mutations"]
}
